<!doctype html>
<html>
<head>
    <meta charset="utf-8"/>
    <title>demo标题</title>
    <script src="http://a.tbcdn.cn/s/kissy/1.3.0/kissy-min.js" charset="utf-8"></script>
</head>
<body>
<h2>demo标题</h2>

<script>
    var S = KISSY;
    if (S.Config.debug) {
        var srcPath = "../../../";
        S.config({
            packages:[
                {
                    name:"gallery",
                    path:srcPath,
                    charset:"utf-8",
                    ignorePackageNameInUri:true
                }
            ]
        });
    }

    S.use('gallery/aop/1.0/', function (S, Do) {
    	var obj = {
    		
    		one: function(msg) {
    			console.log(msg);
    			return 1;
    		},
    		
    		two: function() {
    			return 2;
    		}
    	};
    	
    	Do.before(function() {
    		return new Do.AlterArgs('', ['alter']);
    	}, obj, 'one', obj);
    	
    	Do.after(function() {
    	    console.log(5);
    		return new Do.AlterReturn('', 'alterReturn');
    	}, obj, 'two', obj);
    	
    	var handle = Do.after(function() {
    		console.log(4);
    	}, obj, 'two', obj);
    	
    	//Do.detach(handle);
    	
    	obj.one(1);
    	console.log(obj.two());
    	
    	//Do.detach(obj, 'one');
    	//Do.detach(obj, 'one', 'after');
    	//Do.detach(obj, 'one', 'before');
    });
</script>
</body>
</html>